!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=37,r=38,s=39,c=40,i=e=>document.querySelector(e),u="Congratulations!",a="Oops! You lost.";var O={BLOCK_SIZE:30,GAME_HAS_STARTED:!1,WAITING_USER_INPUT:!0,SPACE_PRESSED:!1,BOARD_ROWS:0,BOARD_COLS:0,INITIAL_HEAD_POSITION:{x:1,y:1},SNAKE_BODY:[{x:1,y:1}],CURRENT_DIRECTION:null,FOOD_POSITION:{},FOOD_UPDATES:[],SOUND:!0};const l=i("#points"),d=i("#username"),S=i(".score-entries");let E=[],_=0;const f=function(e){let t=0;for(;t<5&&E[t]&&E[t].score>=_;)++t;t<5&&(E=E.slice(0,t).concat([{username:e,score:_}]).concat(E.slice(t,4)))},D=function(){E.forEach((e,t)=>{const n=S.children.item(t);if(n)n.innerText=`${e.username} - ${e.score}`;else{const t=document.createElement("h2");t.innerText=`${e.username} - ${e.score}`,S.appendChild(t)}})},A=function(){l.innerText=_};const y=document.querySelector(".board"),I=y.parentElement,m=function(){const e=window.getComputedStyle(l.parentElement);return parseInt(e.height)}(),p=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginTop)+parseInt(e.marginBottom),n=I.offsetHeight-m-t;return n-n%O.BLOCK_SIZE},g=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginLeft)+parseInt(e.marginRight),n=I.offsetWidth-t;return n-n%O.BLOCK_SIZE};function T(){const e=p(),t=g();O.BOARD_ROWS=e/O.BLOCK_SIZE,O.BOARD_COLS=t/O.BLOCK_SIZE,y.style.height=`${e}px`,y.style.width=`${t}px`}function N(e,t){e.style.top=`${t.y*O.BLOCK_SIZE}px`,e.style.left=`${t.x*O.BLOCK_SIZE}px`}T();const h=document.querySelector(".board");let B=[document.querySelector(".snake-head")];N(B[0],O.SNAKE_BODY[0]);const b=()=>{x(O.SNAKE_BODY[0])(O.FOOD_POSITION)&&(O.FOOD_UPDATES.push(O.FOOD_POSITION),O.FOOD_POSITION=null,O.SOUND&&document.getElementById("bite").play())},R=()=>{const e=Object.assign({},O.SNAKE_BODY[O.SNAKE_BODY.length-1]);C(0);for(let e=O.SNAKE_BODY.length-1;e>=1;--e)C(e),O.SNAKE_BODY[e].direction=O.SNAKE_BODY[e-1].direction;v(e)},C=e=>{const t=O.SNAKE_BODY[e];switch(t.direction){case r:t.y-=1,0===e&&P(180);break;case s:t.x+=1,0===e&&P(-90);break;case c:t.y+=1,0===e&&P(0);break;case o:t.x-=1,0===e&&P(90)}N(B[e],t)},P=e=>{B[0].style.transform=`rotate(${e}deg)`},v=e=>{O.FOOD_UPDATES.length&&x(e)(O.FOOD_UPDATES[0])&&(K(e),O.SNAKE_BODY.push(e),O.FOOD_UPDATES.shift())},K=e=>{const t=document.createElement("div");t.classList.add("snake-body"),t.style.top=`${e.y*O.BLOCK_SIZE}px`,t.style.left=`${e.x*O.BLOCK_SIZE}px`,h.appendChild(t),B.push(t)},x=e=>t=>e.x===t.x&&e.y===t.y,L=()=>O.SNAKE_BODY[0].x<0||O.SNAKE_BODY[0].x>=O.BOARD_COLS||O.SNAKE_BODY[0].y<0||O.SNAKE_BODY[0].y>=O.BOARD_ROWS,Y=()=>U(O.SNAKE_BODY[0],!1);function U(e,t=!0){let n=!1;const o=x(e);for(let e=t?0:1;e<O.SNAKE_BODY.length;++e)if(o(O.SNAKE_BODY[e])){n=!0;break}return n}const w=document.getElementById("food");function k(){for(O.FOOD_POSITION=M();U(O.FOOD_POSITION);)O.FOOD_POSITION=M();N(w,O.FOOD_POSITION)}function M(){return{x:Math.floor(Math.random()*O.BOARD_COLS),y:Math.floor(Math.random()*O.BOARD_ROWS)}}const F=i(".cover"),G=i("#startGameBtn"),$=i(".soundBtn"),W=i("#sound"),j=i(".highest-scores-box"),H=i("#submitScoreBtn"),Z=i(".play-again-box"),q=i(".message"),X=document.querySelectorAll(".again");function z(){F.style.display="block",Z.style.display="grid",function(e){Array.from(e.children).forEach(e=>{e.style.display="block"})}(Z),document.getElementById("bg").pause(),"./dist/images/sound.svg"==W.getAttribute("src")&&document.getElementById("loss").play()}function J(){Array.from(F.children).forEach(e=>{e.style.display="none"})}function Q(){return F.style.display="none",J(),k(),O.SNAKE_BODY.splice(0,O.SNAKE_BODY.length,Object.assign({},O.INITIAL_HEAD_POSITION)),O.CURRENT_DIRECTION=s,O.FOOD_UPDATES.splice(0,O.FOOD_UPDATES.length),B.slice(1).forEach(e=>{e.parentNode.removeChild(e)}),B=[document.querySelector(".snake-head")],P(-90),R(0),_=0,A(),d.value="",O.GAME_HAS_STARTED=!0,O.WAITING_USER_INPUT=!0,"./dist/images/sound.svg"==W.getAttribute("src")&&(document.getElementById("bg").play(),document.getElementById("bg").loop=!0,document.getElementById("bg").volume=.2),!1}function V(){if(O.GAME_HAS_STARTED&&!O.WAITING_USER_INPUT)try{!function(){if(O.SNAKE_BODY[0].direction=O.CURRENT_DIRECTION,b(),R(),L()||Y())throw Error("Game Over")}(),O.FOOD_POSITION||(++_,A(),O.SNAKE_BODY.length===O.BOARD_ROWS*O.BOARD_COLS?(q.innerText=u,z()):k())}catch(e){O.GAME_HAS_STARTED=!1,q.innerText=a,z()}}G.addEventListener("click",Q),X.forEach(e=>e.addEventListener("click",Q)),H.addEventListener("click",function(){!function(){const e=d.value;e&&(f(e),D())}(),J(),j.style.display="grid"}),$.addEventListener("click",function(){switch(W.getAttribute("src")){case"./dist/images/sound.svg":W.src="./dist/images/nosound.svg",O.SOUND=!1;break;case"./dist/images/nosound.svg":W.src="./dist/images/sound.svg",O.SOUND=!0}}),window.setInterval(()=>{V(),O.SPACE_PRESSED&&setTimeout(()=>V(),75)},150),window.onresize=function(){T(),O.GAME_HAS_STARTED&&(O.GAME_HAS_STARTED=!1,z())},window.onkeydown=function(e){ee(e.keyCode),32===e.keyCode&&(O.SPACE_PRESSED=!0)};const ee=e=>{if(O.WAITING_USER_INPUT=!1,e>=o&&e<=c){const t=O.SNAKE_BODY[0].direction;2===Math.abs(t-e)||(O.CURRENT_DIRECTION=e)}};window.onkeyup=function(e){32===e.keyCode&&(O.SPACE_PRESSED=!1)},i(".board").addEventListener("touchstart",function(e){e.preventDefault(),te=e.touches[0].screenX,ne=e.touches[0].screenY}),i(".board").addEventListener("touchmove",function(e){e.preventDefault(),oe=e.touches[0].screenX,re=e.touches[0].screenY}),i(".board").addEventListener("touchend",function(){let e=Math.abs(te-oe),t=Math.abs(ne-re);oe<=te&&e>t&&ee(o);oe>=te&&e>t&&ee(s);re<=ne&&t>e&&ee(r);re>=ne&&t>e&&ee(c)});let te=0,ne=0,oe=0,re=0}]);