!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=37,r=38,s=39,c=40,i=e=>document.querySelector(e),a="Congratulations!",u="Oops! You lost.";var l={BLOCK_SIZE:30,GAME_HAS_STARTED:!1,WAITING_USER_INPUT:!0,SPACE_PRESSED:!1,BOARD_ROWS:0,BOARD_COLS:0,INITIAL_HEAD_POSITION:{x:1,y:1},SNAKE_BODY:[{x:1,y:1}],CURRENT_DIRECTION:null,FOOD_POSITION:{},FOOD_UPDATES:[],SOUND:!0};const d=i("#points"),O=i("#username"),S=i(".score-entries");let E=[],_=0;const f=function(e){let t=0;for(;t<5&&E[t]&&E[t].score>=_;)++t;t<5&&(E=E.slice(0,t).concat([{username:e,score:_}]).concat(E.slice(t,4)))},y=function(){E.forEach((e,t)=>{const n=S.children.item(t);if(n)n.innerText=`${e.username} - ${e.score}`;else{const t=document.createElement("h2");t.innerText=`${e.username} - ${e.score}`,S.appendChild(t)}})},D=function(){d.innerText=_};O.addEventListener("keyup",e=>{e.preventDefault(),13===e.keyCode&&i("#submitScoreBtn").click()});const g=document.querySelector(".board"),A=g.parentElement,m=function(){const e=window.getComputedStyle(d.parentElement);return parseInt(e.height)}(),I=function(){const e=window.getComputedStyle(g),t=parseInt(e.marginTop)+parseInt(e.marginBottom),n=A.offsetHeight-m-t;return n-n%l.BLOCK_SIZE},p=function(){const e=window.getComputedStyle(g),t=parseInt(e.marginLeft)+parseInt(e.marginRight),n=A.offsetWidth-t;return n-n%l.BLOCK_SIZE};function h(){const e=I(),t=p();l.BOARD_ROWS=e/l.BLOCK_SIZE,l.BOARD_COLS=t/l.BLOCK_SIZE,g.style.height=`${e}px`,g.style.width=`${t}px`}function T(e,t){e.style.top=`${t.y*l.BLOCK_SIZE}px`,e.style.left=`${t.x*l.BLOCK_SIZE}px`}h();const N=document.querySelector(".board");let B=[document.querySelector(".snake-head")];T(B[0],l.SNAKE_BODY[0]);const b=()=>{x(l.SNAKE_BODY[0])(l.FOOD_POSITION)&&(l.FOOD_UPDATES.push(l.FOOD_POSITION),l.FOOD_POSITION=null,l.SOUND&&document.getElementById("bite").play())},R=()=>{const e=Object.assign({},l.SNAKE_BODY[l.SNAKE_BODY.length-1]);v(0);for(let e=l.SNAKE_BODY.length-1;e>=1;--e)v(e),l.SNAKE_BODY[e].direction=l.SNAKE_BODY[e-1].direction;P(e)},v=e=>{const t=l.SNAKE_BODY[e];switch(t.direction){case r:t.y-=1,0===e&&C(180);break;case s:t.x+=1,0===e&&C(-90);break;case c:t.y+=1,0===e&&C(0);break;case o:t.x-=1,0===e&&C(90)}T(B[e],t)},C=e=>{B[0].style.transform=`rotate(${e}deg)`},P=e=>{l.FOOD_UPDATES.length&&x(e)(l.FOOD_UPDATES[0])&&(K(e),l.SNAKE_BODY.push(e),l.FOOD_UPDATES.shift())},K=e=>{const t=document.createElement("div");t.classList.add("snake-body"),t.style.top=`${e.y*l.BLOCK_SIZE}px`,t.style.left=`${e.x*l.BLOCK_SIZE}px`,N.appendChild(t),B.push(t)},x=e=>t=>e.x===t.x&&e.y===t.y,Y=()=>l.SNAKE_BODY[0].x<0||l.SNAKE_BODY[0].x>=l.BOARD_COLS||l.SNAKE_BODY[0].y<0||l.SNAKE_BODY[0].y>=l.BOARD_ROWS,k=()=>L(l.SNAKE_BODY[0],!1);function L(e,t=!0){let n=!1;const o=x(e);for(let e=t?0:1;e<l.SNAKE_BODY.length;++e)if(o(l.SNAKE_BODY[e])){n=!0;break}return n}const U=document.getElementById("food"),w=()=>{let e=Math.random();e<.6&&(U.style.backgroundImage='url("./dist/images/apple.svg")'),e>=.6&&e<.8&&(U.style.backgroundImage='url("./dist/images/cherry.svg")'),e>=.8&&e<.9&&(U.style.backgroundImage='url("./dist/images/pear.svg")'),e>=.9&&(U.style.backgroundImage='url("./dist/images/peach.svg")')};function M(){for(l.FOOD_POSITION=F();L(l.FOOD_POSITION);)l.FOOD_POSITION=F();w(),T(U,l.FOOD_POSITION)}function F(){return{x:Math.floor(Math.random()*l.BOARD_COLS),y:Math.floor(Math.random()*l.BOARD_ROWS)}}const G=i(".cover"),$=i("#startGameBtn"),W=i(".soundBtn"),j=i("#sound"),H=i(".highest-scores-box"),Z=i("#submitScoreBtn"),q=i(".play-again-box"),X=i(".message"),z=document.querySelectorAll(".again");function J(){G.style.display="block",q.style.display="grid",function(e){Array.from(e.children).forEach(e=>{e.style.display="block"})}(q),document.getElementById("bg").pause(),"./dist/images/sound.svg"==j.getAttribute("src")&&document.getElementById("loss").play()}function Q(){Array.from(G.children).forEach(e=>{e.style.display="none"})}function V(){return G.style.display="none",Q(),M(),l.SNAKE_BODY.splice(0,l.SNAKE_BODY.length,Object.assign({},l.INITIAL_HEAD_POSITION)),l.CURRENT_DIRECTION=s,l.FOOD_UPDATES.splice(0,l.FOOD_UPDATES.length),B.slice(1).forEach(e=>{e.parentNode.removeChild(e)}),B=[document.querySelector(".snake-head")],C(-90),R(0),_=0,D(),O.value="",l.GAME_HAS_STARTED=!0,l.WAITING_USER_INPUT=!0,"./dist/images/sound.svg"==j.getAttribute("src")&&(document.getElementById("bg").play(),document.getElementById("bg").loop=!0,document.getElementById("bg").volume=.2),!1}function ee(){if(l.GAME_HAS_STARTED&&!l.WAITING_USER_INPUT)try{!function(){if(l.SNAKE_BODY[0].direction=l.CURRENT_DIRECTION,b(),R(),Y()||k())throw Error("Game Over")}(),l.FOOD_POSITION||(++_,D(),l.SNAKE_BODY.length===l.BOARD_ROWS*l.BOARD_COLS?(X.innerText=a,J()):M())}catch(e){l.GAME_HAS_STARTED=!1,X.innerText=u,J()}}$.addEventListener("click",V),z.forEach(e=>e.addEventListener("click",V)),Z.addEventListener("click",function(){!function(){const e=O.value;e&&(f(e),y())}(),Q(),H.style.display="grid"}),W.addEventListener("click",function(){switch(j.getAttribute("src")){case"./dist/images/sound.svg":j.src="./dist/images/nosound.svg",l.SOUND=!1;break;case"./dist/images/nosound.svg":j.src="./dist/images/sound.svg",l.SOUND=!0}}),window.setInterval(()=>{ee(),l.SPACE_PRESSED&&setTimeout(()=>ee(),75)},150),window.onresize=function(){h(),l.GAME_HAS_STARTED&&(l.GAME_HAS_STARTED=!1,J())},window.onkeydown=function(e){te(e.keyCode),32===e.keyCode&&(l.SPACE_PRESSED=!0)};const te=e=>{if(l.WAITING_USER_INPUT=!1,e>=o&&e<=c){const t=l.SNAKE_BODY[0].direction;2===Math.abs(t-e)||(l.CURRENT_DIRECTION=e)}};window.onkeyup=function(e){32===e.keyCode&&(l.SPACE_PRESSED=!1)},i("#container").addEventListener("touchstart",function(e){e.preventDefault(),ne=e.touches[0].screenX,oe=e.touches[0].screenY},{passive:!1}),i("#container").addEventListener("touchmove",function(e){e.preventDefault(),ie=Math.abs(ne-re),ae=Math.abs(oe-se),re=e.touches[0].screenX,se=e.touches[0].screenY,ie>=ce&&(ue(),ne=e.touches[0].screenX,oe=e.touches[0].screenY);ae>=ce&&(ue(),ne=e.touches[0].screenX,oe=e.touches[0].screenY)},{passive:!1});let ne=0,oe=0,re=0,se=0,ce=40,ie=0,ae=0;function ue(){ie=Math.abs(ne-re),ae=Math.abs(oe-se),re<=ne&&ie>ae&&te(o),re>=ne&&ie>ae&&te(s),se<=oe&&ae>ie&&te(r),se>=oe&&ae>ie&&te(c)}}]);