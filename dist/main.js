!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=37,r=38,c=39,i=40,s=e=>document.querySelector(e);var l={BLOCK_SIZE:30,GAME_HAS_STARTED:!1,WAITING_USER_INPUT:!0,SPACE_PRESSED:!1,BOARD_ROWS:0,BOARD_COLS:0,INITIAL_HEAD_POSITION:{x:1,y:1},SNAKE_BODY:[{x:1,y:1}],CURRENT_DIRECTION:null,FOOD_POSITION:{},FOOD_UPDATES:[]};const u=s("#points"),a=s("#username"),O=s(".score-entries");let d=[],S=0;const E=function(e){let t=0;for(;t<5&&d[t]&&d[t].score>=S;)++t;t<5&&(d=d.slice(0,t).concat([{username:e,score:S}]).concat(d.slice(t,4)))},_=function(){d.forEach((e,t)=>{const n=O.children.item(t);if(n)n.innerText=`${e.username} - ${e.score}`;else{const t=document.createElement("h2");t.innerText=`${e.username} - ${e.score}`,O.appendChild(t)}})},f=function(){u.innerText=S};const y=document.querySelector(".board"),I=y.parentElement,A=function(){const e=window.getComputedStyle(u.parentElement);return parseInt(e.height)}(),D=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginTop)+parseInt(e.marginBottom),n=I.offsetHeight-A-t;return n-n%l.BLOCK_SIZE},p=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginLeft)+parseInt(e.marginRight),n=I.offsetWidth-t;return n-n%l.BLOCK_SIZE};function m(){const e=D(),t=p();l.BOARD_ROWS=e/l.BLOCK_SIZE,l.BOARD_COLS=t/l.BLOCK_SIZE,y.style.height=`${e}px`,y.style.width=`${t}px`}function T(e,t){e.style.top=`${t.y*l.BLOCK_SIZE}px`,e.style.left=`${t.x*l.BLOCK_SIZE}px`}m();const h=document.querySelector(".board");let N=[document.querySelector(".snake-head")];T(N[0],l.SNAKE_BODY[0]);const B=()=>{K(l.SNAKE_BODY[0])(l.FOOD_POSITION)&&(l.FOOD_UPDATES.push(l.FOOD_POSITION),l.FOOD_POSITION=null,document.getElementById("bite").play())},g=()=>{const e=Object.assign({},l.SNAKE_BODY[l.SNAKE_BODY.length-1]);R(0);for(let e=l.SNAKE_BODY.length-1;e>=1;--e)R(e),l.SNAKE_BODY[e].direction=l.SNAKE_BODY[e-1].direction;P(e)},R=e=>{const t=l.SNAKE_BODY[e];switch(t.direction){case r:t.y-=1,0===e&&b(180);break;case c:t.x+=1,0===e&&b(-90);break;case i:t.y+=1,0===e&&b(0);break;case o:t.x-=1,0===e&&b(90)}T(N[e],t)},b=e=>{N[0].style.transform=`rotate(${e}deg)`},P=e=>{l.FOOD_UPDATES.length&&K(e)(l.FOOD_UPDATES[0])&&(C(e),l.SNAKE_BODY.push(e),l.FOOD_UPDATES.shift())},C=e=>{const t=document.createElement("div");t.classList.add("snake-body"),t.style.top=`${e.y*l.BLOCK_SIZE}px`,t.style.left=`${e.x*l.BLOCK_SIZE}px`,h.appendChild(t),N.push(t)},K=e=>t=>e.x===t.x&&e.y===t.y,x=()=>l.SNAKE_BODY[0].x<0||l.SNAKE_BODY[0].x>=l.BOARD_COLS||l.SNAKE_BODY[0].y<0||l.SNAKE_BODY[0].y>=l.BOARD_ROWS,v=()=>L(l.SNAKE_BODY[0],!1);function L(e,t=!0){let n=!1;const o=K(e);for(let e=t?0:1;e<l.SNAKE_BODY.length;++e)if(o(l.SNAKE_BODY[e])){n=!0;break}return n}const Y=document.getElementById("food");function w(){for(l.FOOD_POSITION=U();L(l.FOOD_POSITION);)l.FOOD_POSITION=U();T(Y,l.FOOD_POSITION)}function U(){return{x:Math.floor(Math.random()*l.BOARD_COLS),y:Math.floor(Math.random()*l.BOARD_ROWS)}}const k=s(".cover"),M=s("#startGameBtn"),F=s(".highest-scores-box"),G=s("#submitScoreBtn"),$=s(".play-again-box"),j=document.querySelectorAll(".again");function H(){k.style.display="block",$.style.display="grid",function(e){Array.from(e.children).forEach(e=>{e.style.display="block"})}($),document.getElementById("bg").pause(),document.getElementById("loss").play()}function W(){Array.from(k.children).forEach(e=>{e.style.display="none"})}function Z(){return k.style.display="none",W(),w(),l.SNAKE_BODY.splice(0,l.SNAKE_BODY.length,Object.assign({},l.INITIAL_HEAD_POSITION)),l.CURRENT_DIRECTION=c,l.FOOD_UPDATES.splice(0,l.FOOD_UPDATES.length),N.slice(1).forEach(e=>{e.parentNode.removeChild(e)}),N=[document.querySelector(".snake-head")],b(-90),g(0),S=0,f(),a.value="",l.GAME_HAS_STARTED=!0,l.WAITING_USER_INPUT=!0,document.getElementById("bg").play(),document.getElementById("bg").loop=!0,document.getElementById("bg").volume=.2,!1}function q(){if(l.GAME_HAS_STARTED&&!l.WAITING_USER_INPUT)try{!function(){if(l.SNAKE_BODY[0].direction=l.CURRENT_DIRECTION,B(),g(),x()||v())throw Error("Game Over")}(),l.FOOD_POSITION||(++S,f(),w())}catch(e){l.GAME_HAS_STARTED=!1,H()}}M.addEventListener("click",Z),j.forEach(e=>e.addEventListener("click",Z)),G.addEventListener("click",function(){!function(){const e=a.value;e&&(E(e),_())}(),W(),F.style.display="grid"}),window.setInterval(()=>{q(),l.SPACE_PRESSED&&setTimeout(()=>q(),75)},150),window.onresize=function(){m(),l.GAME_HAS_STARTED&&(l.GAME_HAS_STARTED=!1,H())},window.onkeydown=function(e){X(e.keyCode),32===e.keyCode&&(l.SPACE_PRESSED=!0)};const X=e=>{if(l.WAITING_USER_INPUT=!1,e>=o&&e<=i){const t=l.SNAKE_BODY[0].direction;2===Math.abs(t-e)||(l.CURRENT_DIRECTION=e)}};window.onkeyup=function(e){32===e.keyCode&&(l.SPACE_PRESSED=!1)},s(".board").addEventListener("touchstart",function(e){z=e.touches[0].screenX,J=e.touches[0].screenY,console.log(e.touches,e.type)}),s(".board").addEventListener("touchmove",function(e){Q=e.touches[0].screenX,V=e.touches[0].screenY,console.log(e.touches,e.type)}),s(".board").addEventListener("touchend",function(){let e=Math.abs(z-Q),t=Math.abs(J-V);Q<=z&&e>t&&X(o);Q>=z&&e>t&&X(c);V<=J&&t>e&&X(r);V>=J&&t>e&&X(i)});let z=0,J=0,Q=0,V=0}]);