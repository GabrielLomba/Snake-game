!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=37,r=38,c=39,i=40,s=e=>document.querySelector(e),l="Congratulations!",O="Oops! You lost.";var a={BLOCK_SIZE:30,GAME_HAS_STARTED:!1,WAITING_USER_INPUT:!0,SPACE_PRESSED:!1,BOARD_ROWS:0,BOARD_COLS:0,INITIAL_HEAD_POSITION:{x:1,y:1},SNAKE_BODY:[{x:1,y:1}],CURRENT_DIRECTION:null,FOOD_POSITION:{},FOOD_UPDATES:[]};const u=s("#points"),d=s("#username"),S=s(".score-entries");let E=[],_=0;const f=function(e){let t=0;for(;t<5&&E[t]&&E[t].score>=_;)++t;t<5&&(E=E.slice(0,t).concat([{username:e,score:_}]).concat(E.slice(t,4)))},D=function(){E.forEach((e,t)=>{const n=S.children.item(t);if(n)n.innerText=`${e.username} - ${e.score}`;else{const t=document.createElement("h2");t.innerText=`${e.username} - ${e.score}`,S.appendChild(t)}})},A=function(){u.innerText=_};const y=document.querySelector(".board"),I=y.parentElement,p=function(){const e=window.getComputedStyle(u.parentElement);return parseInt(e.height)}(),m=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginTop)+parseInt(e.marginBottom),n=I.offsetHeight-p-t;return n-n%a.BLOCK_SIZE},T=function(){const e=window.getComputedStyle(y),t=parseInt(e.marginLeft)+parseInt(e.marginRight),n=I.offsetWidth-t;return n-n%a.BLOCK_SIZE};function h(){const e=m(),t=T();a.BOARD_ROWS=e/a.BLOCK_SIZE,a.BOARD_COLS=t/a.BLOCK_SIZE,y.style.height=`${e}px`,y.style.width=`${t}px`}function N(e,t){e.style.top=`${t.y*a.BLOCK_SIZE}px`,e.style.left=`${t.x*a.BLOCK_SIZE}px`}h();const B=document.querySelector(".board");let g=[document.querySelector(".snake-head")];N(g[0],a.SNAKE_BODY[0]);const R=()=>{v(a.SNAKE_BODY[0])(a.FOOD_POSITION)&&(a.FOOD_UPDATES.push(a.FOOD_POSITION),a.FOOD_POSITION=null,document.getElementById("bite").play())},b=()=>{const e=Object.assign({},a.SNAKE_BODY[a.SNAKE_BODY.length-1]);C(0);for(let e=a.SNAKE_BODY.length-1;e>=1;--e)C(e),a.SNAKE_BODY[e].direction=a.SNAKE_BODY[e-1].direction;K(e)},C=e=>{const t=a.SNAKE_BODY[e];switch(t.direction){case r:t.y-=1,0===e&&P(180);break;case c:t.x+=1,0===e&&P(-90);break;case i:t.y+=1,0===e&&P(0);break;case o:t.x-=1,0===e&&P(90)}N(g[e],t)},P=e=>{g[0].style.transform=`rotate(${e}deg)`},K=e=>{a.FOOD_UPDATES.length&&v(e)(a.FOOD_UPDATES[0])&&(x(e),a.SNAKE_BODY.push(e),a.FOOD_UPDATES.shift())},x=e=>{const t=document.createElement("div");t.classList.add("snake-body"),t.style.top=`${e.y*a.BLOCK_SIZE}px`,t.style.left=`${e.x*a.BLOCK_SIZE}px`,B.appendChild(t),g.push(t)},v=e=>t=>e.x===t.x&&e.y===t.y,Y=()=>a.SNAKE_BODY[0].x<0||a.SNAKE_BODY[0].x>=a.BOARD_COLS||a.SNAKE_BODY[0].y<0||a.SNAKE_BODY[0].y>=a.BOARD_ROWS,L=()=>w(a.SNAKE_BODY[0],!1);function w(e,t=!0){let n=!1;const o=v(e);for(let e=t?0:1;e<a.SNAKE_BODY.length;++e)if(o(a.SNAKE_BODY[e])){n=!0;break}return n}const U=document.getElementById("food");function k(){for(a.FOOD_POSITION=M();w(a.FOOD_POSITION);)a.FOOD_POSITION=M();N(U,a.FOOD_POSITION)}function M(){return{x:Math.floor(Math.random()*a.BOARD_COLS),y:Math.floor(Math.random()*a.BOARD_ROWS)}}const F=s(".cover"),G=s("#startGameBtn"),$=s(".highest-scores-box"),W=s("#submitScoreBtn"),j=s(".play-again-box"),H=s(".message"),Z=document.querySelectorAll(".again");function q(){F.style.display="block",j.style.display="grid",function(e){Array.from(e.children).forEach(e=>{e.style.display="block"})}(j),document.getElementById("bg").pause(),document.getElementById("loss").play()}function X(){Array.from(F.children).forEach(e=>{e.style.display="none"})}function z(){return F.style.display="none",X(),k(),a.SNAKE_BODY.splice(0,a.SNAKE_BODY.length,Object.assign({},a.INITIAL_HEAD_POSITION)),a.CURRENT_DIRECTION=c,a.FOOD_UPDATES.splice(0,a.FOOD_UPDATES.length),g.slice(1).forEach(e=>{e.parentNode.removeChild(e)}),g=[document.querySelector(".snake-head")],P(-90),b(0),_=0,A(),d.value="",a.GAME_HAS_STARTED=!0,a.WAITING_USER_INPUT=!0,document.getElementById("bg").play(),document.getElementById("bg").loop=!0,document.getElementById("bg").volume=.2,!1}function J(){if(a.GAME_HAS_STARTED&&!a.WAITING_USER_INPUT)try{!function(){if(a.SNAKE_BODY[0].direction=a.CURRENT_DIRECTION,R(),b(),Y()||L())throw Error("Game Over")}(),a.FOOD_POSITION||(++_,A(),a.SNAKE_BODY.length===a.BOARD_ROWS*a.BOARD_COLS?(H.innerText=l,q()):k())}catch(e){a.GAME_HAS_STARTED=!1,H.innerText=O,q()}}G.addEventListener("click",z),Z.forEach(e=>e.addEventListener("click",z)),W.addEventListener("click",function(){!function(){const e=d.value;e&&(f(e),D())}(),X(),$.style.display="grid"}),window.setInterval(()=>{J(),a.SPACE_PRESSED&&setTimeout(()=>J(),75)},150),window.onresize=function(){h(),a.GAME_HAS_STARTED&&(a.GAME_HAS_STARTED=!1,q())},window.onkeydown=function(e){Q(e.keyCode),32===e.keyCode&&(a.SPACE_PRESSED=!0)};const Q=e=>{if(a.WAITING_USER_INPUT=!1,e>=o&&e<=i){const t=a.SNAKE_BODY[0].direction;2===Math.abs(t-e)||(a.CURRENT_DIRECTION=e)}};window.onkeyup=function(e){32===e.keyCode&&(a.SPACE_PRESSED=!1)},s(".board").addEventListener("touchstart",function(e){e.preventDefault(),V=e.touches[0].screenX,ee=e.touches[0].screenY}),s(".board").addEventListener("touchmove",function(e){e.preventDefault(),te=e.touches[0].screenX,ne=e.touches[0].screenY}),s(".board").addEventListener("touchend",function(){let e=Math.abs(V-te),t=Math.abs(ee-ne);te<=V&&e>t&&Q(o);te>=V&&e>t&&Q(c);ne<=ee&&t>e&&Q(r);ne>=ee&&t>e&&Q(i)});let V=0,ee=0,te=0,ne=0}]);